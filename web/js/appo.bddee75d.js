(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["appo"],{"0707":function(e,a,t){},"1c75":function(e,a,t){},2198:function(e,a,t){"use strict";t.r(a);var s=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("a-card",{staticStyle:{padding:"30px 0px"},attrs:{bordered:!1,title:"第三方配置"}},[t("div",{staticClass:"table-page-search-wrapper"},[t("ul",{staticClass:"third"},[t("li",{staticClass:"weixin"},[t("div",{staticClass:"icon-wrap"}),t("div",{staticClass:"icon-txt"},[e._v("微信登录分享")]),t("div",{staticClass:"icon-btn"},[t("a",{on:{click:function(a){return e.showModel("weixin")}}},[e._v("去配置")])]),t("div",{staticClass:"icon-desc"},[e._v("接入微信登录&分享，实现微信账号快速登录及微信分享，一键连接亿万微信用户。")]),e.page.app.thirdassess.weixin&&e.page.app.thirdassess.weixin.app_id&&""!=e.page.app.thirdassess.weixin.app_id?t("div",{staticClass:"has-option"},[t("span",[e._v("已配置")])]):e._e()]),t("li",{staticClass:"igetui"},[t("div",{staticClass:"icon-wrap"}),t("div",{staticClass:"icon-txt"},[e._v("个推推送")]),t("div",{staticClass:"icon-btn"},[t("a",{on:{click:function(a){return e.showModel("igetui")}}},[e._v("去配置")])]),t("div",{staticClass:"icon-desc"},[e._v("app中消息推送服务")]),e.page.app.thirdassess.igetui&&e.page.app.thirdassess.igetui.app_id&&""!=e.page.app.thirdassess.igetui.app_id?t("div",{staticClass:"has-option"},[t("span",[e._v("已配置")])]):e._e()]),t("li",{staticClass:"baichuan"},[t("div",{staticClass:"icon-wrap"}),t("div",{staticClass:"icon-txt"},[e._v("阿里百川")]),t("div",{staticClass:"icon-btn"},[t("a",{on:{click:function(a){return e.showModel("baichuan")}}},[e._v("去配置")])]),t("div",{staticClass:"icon-desc"},[e._v("用于app直接对接淘宝客户端，提高导购电商体验")]),e.page.app.thirdassess.baichuan&&e.page.app.thirdassess.baichuan.appkey&&""!=e.page.app.thirdassess.baichuan.appkey?t("div",{staticClass:"has-option"},[t("span",[e._v("已配置")])]):e._e()]),t("li",{staticClass:"umeng"},[t("div",{staticClass:"icon-wrap"}),t("div",{staticClass:"icon-txt"},[e._v("友盟")]),t("div",{staticClass:"icon-btn"},[t("a",{on:{click:function(a){return e.showModel("umeng")}}},[e._v("去配置")])]),t("div",{staticClass:"icon-desc"},[e._v("专注于分享和移动统计，为营销做辅助")]),e.page.app.thirdassess.umeng&&e.page.app.thirdassess.umeng.androidAppKey&&""!=e.page.app.thirdassess.umeng.androidAppKey?t("div",{staticClass:"has-option"},[t("span",[e._v("已配置")])]):e._e()]),t("li",{staticClass:"umeng"},[t("div",{staticClass:"icon-wrap"}),t("div",{staticClass:"icon-txt"},[e._v("友盟推送")]),t("div",{staticClass:"icon-btn"},[t("a",{on:{click:function(a){return e.showModel("upush")}}},[e._v("去配置")])]),t("div",{staticClass:"icon-desc"},[e._v("专注于推送消息")]),e.page.app.thirdassess.upush&&e.page.app.thirdassess.upush.android_key&&""!=e.page.app.thirdassess.upush.android_key?t("div",{staticClass:"has-option"},[t("span",[e._v("已配置")])]):e._e()]),t("li",{staticClass:"xg"},[t("div",{staticClass:"icon-wrap"}),t("div",{staticClass:"icon-txt"},[e._v("信鸽推送")]),t("div",{staticClass:"icon-btn"},[t("a",{on:{click:function(a){return e.showModel("xg")}}},[e._v("去配置")])]),t("div",{staticClass:"icon-desc"},[e._v("专注于推送消息")]),e.page.app.thirdassess.xg&&e.page.app.thirdassess.xg.app_id&&""!=e.page.app.thirdassess.xg.app_id?t("div",{staticClass:"has-option"},[t("span",[e._v("已配置")])]):e._e()])])]),t("a-modal",{attrs:{title:"第三方配置",visible:e.page.visible,confirmLoading:e.page.confirmLoading,width:800},on:{ok:e.handleOk,cancel:e.handleCancel}},[t("Form",{attrs:{form:e.form}},[e.page.model.show.weixin?t("div",[t("a-form-item",[t("a",{attrs:{href:e.page.helps.thirdassess.weixin,target:"_blank"}},[e._v("微信开放平台配置方法")])]),t("a-form-item",{attrs:{label:"App Id",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[t("a-input",{attrs:{placeholder:""},model:{value:e.page.app.thirdassess.weixin.app_id,callback:function(a){e.$set(e.page.app.thirdassess.weixin,"app_id",a)},expression:"page.app.thirdassess.weixin.app_id"}},[t("span",{attrs:{slot:"addonAfter"},slot:"addonAfter"},[e._v("微信开发者后台，提交应用后获取")])])],1),t("a-form-item",{attrs:{label:"App Secret",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[t("a-input",{attrs:{placeholder:""},model:{value:e.page.app.thirdassess.weixin.app_secret,callback:function(a){e.$set(e.page.app.thirdassess.weixin,"app_secret",a)},expression:"page.app.thirdassess.weixin.app_secret"}},[t("span",{attrs:{slot:"addonAfter"},slot:"addonAfter"},[e._v("微信开发者获取")])])],1),t("a-form-item",{attrs:{label:"微信登录",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[t("a-switch",{attrs:{checkedChildren:"开",unCheckedChildren:"关",defaultChecked:""},model:{value:e.page.app.thirdassess.weixin.login,callback:function(a){e.$set(e.page.app.thirdassess.weixin,"login",a)},expression:"page.app.thirdassess.weixin.login"}})],1)],1):e._e(),e.page.model.show.igetui?t("div",[t("a-form-item",[t("a",{attrs:{href:e.page.helps.thirdassess.getui,target:"_blank"}},[e._v("个推配置方法")])]),t("a-form-item",{attrs:{label:"AppID",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[t("a-input",{attrs:{placeholder:""},model:{value:e.page.app.thirdassess.igetui.app_id,callback:function(a){e.$set(e.page.app.thirdassess.igetui,"app_id",a)},expression:"page.app.thirdassess.igetui.app_id"}},[t("span",{attrs:{slot:"addonAfter"},slot:"addonAfter"})])],1),t("a-form-item",{attrs:{label:"AppSecret",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[t("a-input",{attrs:{placeholder:""},model:{value:e.page.app.thirdassess.igetui.app_secret,callback:function(a){e.$set(e.page.app.thirdassess.igetui,"app_secret",a)},expression:"page.app.thirdassess.igetui.app_secret"}},[t("span",{attrs:{slot:"addonAfter"},slot:"addonAfter"})])],1),t("a-form-item",{attrs:{label:"AppKey",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[t("a-input",{attrs:{placeholder:""},model:{value:e.page.app.thirdassess.igetui.app_key,callback:function(a){e.$set(e.page.app.thirdassess.igetui,"app_key",a)},expression:"page.app.thirdassess.igetui.app_key"}},[t("span",{attrs:{slot:"addonAfter"},slot:"addonAfter"})])],1),t("a-form-item",{attrs:{label:"MasterSecret",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[t("a-input",{attrs:{placeholder:""},model:{value:e.page.app.thirdassess.igetui.master_secret,callback:function(a){e.$set(e.page.app.thirdassess.igetui,"master_secret",a)},expression:"page.app.thirdassess.igetui.master_secret"}},[t("span",{attrs:{slot:"addonAfter"},slot:"addonAfter"})])],1)],1):e._e(),e.page.model.show.baichuan?t("div",[t("a-form-item",[t("a",{attrs:{href:e.page.helps.thirdassess.baichuan,target:"_blank"}},[e._v("百川配置方法")])]),t("a-form-item",{attrs:{label:"百川appkey",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[t("a-input",{attrs:{placeholder:""},model:{value:e.page.app.thirdassess.baichuan.appkey,callback:function(a){e.$set(e.page.app.thirdassess.baichuan,"appkey",a)},expression:"page.app.thirdassess.baichuan.appkey"}},[t("span",{attrs:{slot:"addonAfter"},slot:"addonAfter"},[e._v("百川提交应用后获取")])])],1),t("a-form-item",{attrs:{label:"阿里妈妈appkey",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[t("a-input",{attrs:{placeholder:""},model:{value:e.page.app.thirdassess.baichuan.taokeAppkey,callback:function(a){e.$set(e.page.app.thirdassess.baichuan,"taokeAppkey",a)},expression:"page.app.thirdassess.baichuan.taokeAppkey"}},[t("span",{attrs:{slot:"addonAfter"},slot:"addonAfter"},[e._v("阿里妈妈提交应用后获取")])])],1),t("a-form-item",{attrs:{label:"安卓安全图",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[t("div",{staticStyle:{display:"none"}},[t("a-input",{ref:"baichuan.android",model:{value:e.page.app.thirdassess.baichuan.android,callback:function(a){e.$set(e.page.app.thirdassess.baichuan,"android",a)},expression:"page.app.thirdassess.baichuan.android"}})],1),t("a-row",[t("a-col",{attrs:{span:"4"}},[t("a-upload",{attrs:{name:"file",multiple:!0,action:"https://www.youdanhui.com/api/common/upload/upload",data:{hpt_token:e.token},beforeUpload:e.beforeUpload},on:{change:e.handleChangeAndroid}},[t("a-button",{attrs:{type:"primary"}},[t("a-icon",{attrs:{type:"upload"}}),(e.page.app.thirdassess.baichuan.android="")?t("span",[e._v("上传")]):t("span",[e._v("替换")])],1)],1)],1),t("a-col",{attrs:{span:"18",offset:"1"}},[""!==e.page.app.baichuan.android?t("a",{attrs:{target:"_blank",href:e.page.app.baichuan.android}},[e._v("下载")]):e._e()])],1)],1),t("a-form-item",{attrs:{label:"苹果安全图",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[t("a-row",[t("a-col",{attrs:{span:"4"}},[t("a-upload",{attrs:{name:"file",multiple:!0,action:"https://www.youdanhui.com/api/common/upload/upload",data:{hpt_token:e.token},beforeUpload:e.beforeUpload},on:{change:e.handleChangeIos}},[t("a-button",{attrs:{type:"primary"}},[t("a-icon",{attrs:{type:"upload"}}),(e.page.app.thirdassess.baichuan.android="")?t("span",[e._v("上传")]):t("span",[e._v("替换")])],1)],1)],1),t("a-col",{attrs:{span:"18",offset:"1"}},[""!==e.page.app.baichuan.ios?t("a",{attrs:{target:"_blank",href:e.page.app.baichuan.ios}},[e._v("下载")]):e._e()])],1)],1)],1):e._e(),e.page.model.show.umeng?t("div",[t("a-form-item",[t("a",{attrs:{href:e.page.helps.thirdassess.youmeng,target:"_blank"}},[e._v("友盟配置方法")])]),t("a-form-item",{attrs:{label:"苹果appkey",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[t("a-input",{attrs:{placeholder:""},model:{value:e.page.app.thirdassess.umeng.iOSAppKey,callback:function(a){e.$set(e.page.app.thirdassess.umeng,"iOSAppKey",a)},expression:"page.app.thirdassess.umeng.iOSAppKey"}},[t("span",{attrs:{slot:"addonAfter"},slot:"addonAfter"})])],1),t("a-form-item",{attrs:{label:"安卓appkey",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[t("a-input",{attrs:{placeholder:""},model:{value:e.page.app.thirdassess.umeng.androidAppKey,callback:function(a){e.$set(e.page.app.thirdassess.umeng,"androidAppKey",a)},expression:"page.app.thirdassess.umeng.androidAppKey"}},[t("span",{attrs:{slot:"addonAfter"},slot:"addonAfter"})])],1)],1):e._e(),e.page.model.show.upush?t("div",[t("a-form-item",[t("a",{attrs:{href:e.page.helps.thirdassess.youmeng,target:"_blank"}},[e._v("友盟配置方法")])]),t("a-form-item",{attrs:{label:"android_key",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[t("a-input",{attrs:{placeholder:""},model:{value:e.page.app.thirdassess.upush.android_key,callback:function(a){e.$set(e.page.app.thirdassess.upush,"android_key",a)},expression:"page.app.thirdassess.upush.android_key"}},[t("span",{attrs:{slot:"addonAfter"},slot:"addonAfter"})])],1),t("a-form-item",{attrs:{label:"App Master Secret",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[t("a-input",{attrs:{placeholder:""},model:{value:e.page.app.thirdassess.upush.android_secret,callback:function(a){e.$set(e.page.app.thirdassess.upush,"android_secret",a)},expression:"page.app.thirdassess.upush.android_secret"}},[t("span",{attrs:{slot:"addonAfter"},slot:"addonAfter"})])],1),t("a-form-item",{attrs:{label:"Umeng Message Secret",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[t("a-input",{attrs:{placeholder:""},model:{value:e.page.app.thirdassess.upush.android_message_secret,callback:function(a){e.$set(e.page.app.thirdassess.upush,"android_message_secret",a)},expression:"page.app.thirdassess.upush.android_message_secret"}},[t("span",{attrs:{slot:"addonAfter"},slot:"addonAfter"})])],1)],1):e._e(),e.page.model.show.xg?t("div",[t("a-form-item",[t("a",{attrs:{href:e.page.helps.thirdassess.xg,target:"_blank"}},[e._v("信鸽配置方法")])]),t("a-form-item",{attrs:{label:"app_id",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[t("a-input",{attrs:{placeholder:""},model:{value:e.page.app.thirdassess.xg.app_id,callback:function(a){e.$set(e.page.app.thirdassess.xg,"app_id",a)},expression:"page.app.thirdassess.xg.app_id"}},[t("span",{attrs:{slot:"addonAfter"},slot:"addonAfter"})])],1),t("a-form-item",{attrs:{label:"SECRET KEY",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[t("a-input",{attrs:{placeholder:""},model:{value:e.page.app.thirdassess.xg.app_key,callback:function(a){e.$set(e.page.app.thirdassess.xg,"app_key",a)},expression:"page.app.thirdassess.xg.app_key"}},[t("span",{attrs:{slot:"addonAfter"},slot:"addonAfter"})])],1)],1):e._e()]),t("div",{attrs:{slot:"footer"},slot:"footer"},[t("a-button",{attrs:{loading:e.page.confirmLoading,type:"primary",block:""},on:{click:e.handleSubmit}},[e._v("保存")])],1)],1)],1)},r=[],i=t("5530"),n=(t("0d03"),t("b0c0"),t("c32d")),o=t.n(n),p=t("2af9"),l=t("4875"),d=t("5880"),c={name:"Page",components:{STable:p["n"],Ellipsis:p["e"]},data:function(){return{labelCol:{xs:{span:24},sm:{span:4}},wrapperCol:{xs:{span:24},sm:{span:20}},form:this.$form.createForm(this),queryParam:{},page:{visible:!1,confirmLoading:!1,app:{thirdassess:{weixin:{app_id:"",app_secret:"",login:!1},igetui:{app_id:"",app_secret:"",app_key:"",master_secret:""},baichuan:{appkey:"",taokeAppkey:"",ios:"",android:""},umeng:{iOSAppKey:"",androidAppKey:""},upush:{android_key:"",android_secret:"",android_message_secret:""},xg:{app_id:"",app_key:""}},baichuan:{ios:"",android:""}},model:{show:{weixin:!1,igetui:!1,baichuan:!1,umeng:!1,xg:!1}},helps:{thirdassess:{baichuan:"https://www.kancloud.cn/shaibaoj01/taokeapp/613219",youmeng:"https://www.kancloud.cn/shaibaoj01/taokeapp/613222",getui:"https://www.kancloud.cn/shaibaoj01/taokeapp/613220",weixin:"https://www.kancloud.cn/shaibaoj01/taokeapp/613221"}}}}},created:function(){},computed:Object(i["a"])({},Object(d["mapGetters"])(["funApp"])),mounted:function(){this.init()},methods:{init:function(){this.query()},query:function(){var e=this;Object(l["h"])().then((function(a){a.data.app&&a.data.app.thirdassess&&a.data.app.thirdassess.weixin&&(e.page.app.baichuan.ios=a.data.app.thirdassess.baichuan.ios,e.page.app.baichuan.android=a.data.app.thirdassess.baichuan.android,e.page.app.thirdassess.weixin.app_id=a.data.app.thirdassess.weixin.app_id,e.page.app.thirdassess.weixin.app_secret=a.data.app.thirdassess.weixin.app_secret,e.page.app.thirdassess.weixin.login=a.data.app.thirdassess.weixin.login,e.page.app.thirdassess.igetui.app_id=a.data.app.thirdassess.igetui.app_id,e.page.app.thirdassess.igetui.app_secret=a.data.app.thirdassess.igetui.app_secret,e.page.app.thirdassess.igetui.app_key=a.data.app.thirdassess.igetui.app_key,e.page.app.thirdassess.igetui.master_secret=a.data.app.thirdassess.igetui.master_secret,e.page.app.thirdassess.baichuan.appkey=a.data.app.thirdassess.baichuan.appkey,e.page.app.thirdassess.baichuan.taokeAppkey=a.data.app.thirdassess.baichuan.taokeAppkey,e.page.app.thirdassess.baichuan.ios=a.data.app.thirdassess.baichuan.ios,e.page.app.thirdassess.baichuan.android=a.data.app.thirdassess.baichuan.android,e.page.app.thirdassess.umeng.iOSAppKey=a.data.app.thirdassess.umeng.iOSAppKey,e.page.app.thirdassess.umeng.androidAppKey=a.data.app.thirdassess.umeng.androidAppKey,a.data.app&&a.data.app.thirdassess&&a.data.app.thirdassess.upush&&(e.page.app.thirdassess.upush.android_key=a.data.app.thirdassess.upush.android_key,e.page.app.thirdassess.upush.android_secret=a.data.app.thirdassess.upush.android_secret,e.page.app.thirdassess.upush.android_message_secret=a.data.app.thirdassess.upush.android_message_secret),a.data.app&&a.data.app.thirdassess&&a.data.app.thirdassess.xg&&(e.page.app.thirdassess.xg.app_id=a.data.app.thirdassess.xg.app_id,e.page.app.thirdassess.xg.app_key=a.data.app.thirdassess.xg.app_key)),a.data.app}))},onSelectChange:function(e,a){this.selectedRowKeys=e,this.selectedRows=a},toggleAdvanced:function(){this.advanced=!this.advanced},resetSearchForm:function(){this.queryParam={date:o()(new Date)}},handleChangeAndroid:function(e){e.file.status,"done"===e.file.status?(this.page.app.thirdassess.baichuan.android=e.file.response.data.item.img,this.page.app.baichuan.android=e.file.response.data.item.img):"error"===e.file.status&&this.$message.error("".concat(e.file.name," 上传文件失败."))},handleChangeIos:function(e){e.file.status,"done"===e.file.status?(this.page.app.thirdassess.baichuan.ios=e.file.response.data.item.img,this.page.app.baichuan.ios=e.file.response.data.item.img):"error"===e.file.status&&this.$message.error("".concat(e.file.name," 上传文件失败."))},beforeUpload:function(e){var a="image/jpg"===e.type||"image/jpeg"===e.type||"image/png"===e.type||"image/gif"===e.type;a||this.$message.error("上传图片只能是jpg/png/gif格式!");var t=e.size/1024/1024<2;return t||this.$message.error("文件大小不能超过 2MB!"),a&&t},handleSubmit:function(){var e=this;this.page.app.thirdassess.baichuan.android=this.page.app.baichuan.android,this.page.app.thirdassess.baichuan.ios=this.page.app.baichuan.ios,this.page.confirmLoading=!0,Object(l["u"])({thirdassess:JSON.stringify(this.page.app.thirdassess),baichuan:JSON.stringify(this.page.app.baichuan)}).then((function(a){0===a.code&&e.$message.success("保存成功"),e.page.visible=!1,e.page.confirmLoading=!1}))},showModel:function(e){this.page.visible=!0,this.page.model.show.weixin=!1,this.page.model.show.igetui=!1,this.page.model.show.baichuan=!1,this.page.model.show.umeng=!1,this.page.model.show.upush=!1,this.page.model.show.xg=!1,"weixin"===e?this.page.model.show.weixin=!0:"igetui"===e?this.page.model.show.igetui=!0:"baichuan"===e?this.page.model.show.baichuan=!0:"umeng"===e?this.page.model.show.umeng=!0:"upush"===e?this.page.model.show.upush=!0:"xg"===e&&(this.page.model.show.xg=!0)},handleOk:function(e){this.page.visible=!1,this.page.confirmLoading=!1},handleCancel:function(e){this.page.visible=!1}}},u=c,m=(t("547c"),t("2877")),h=Object(m["a"])(u,s,r,!1,null,"74b542f1",null);a["default"]=h.exports},2934:function(e,a,t){"use strict";t.d(a,"b",(function(){return i})),t.d(a,"a",(function(){return n})),t.d(a,"c",(function(){return o}));var s=t("b775"),r={list:"/api/common/channel/items",getGoodsItems:"/api/common/goods/list",getGoodsView:"/api/common/goods/view"};function i(e){return Object(s["b"])({url:r.getGoodsView,method:"post",data:e})}function n(e){return Object(s["b"])({url:r.getGoodsItems,method:"post",data:e})}function o(e){return Object(s["b"])({url:r.list,method:"post",data:e})}},4087:function(e,a,t){"use strict";t("7c3a")},4088:function(e,a,t){"use strict";t("1c75")},4875:function(e,a,t){"use strict";t.d(a,"t",(function(){return i})),t.d(a,"g",(function(){return n})),t.d(a,"o",(function(){return o})),t.d(a,"u",(function(){return p})),t.d(a,"h",(function(){return l})),t.d(a,"s",(function(){return d})),t.d(a,"p",(function(){return c})),t.d(a,"r",(function(){return u})),t.d(a,"i",(function(){return m})),t.d(a,"q",(function(){return h})),t.d(a,"f",(function(){return f})),t.d(a,"e",(function(){return g})),t.d(a,"c",(function(){return b})),t.d(a,"d",(function(){return _})),t.d(a,"k",(function(){return v})),t.d(a,"l",(function(){return w})),t.d(a,"n",(function(){return y})),t.d(a,"a",(function(){return k})),t.d(a,"b",(function(){return C})),t.d(a,"m",(function(){return x})),t.d(a,"j",(function(){return O}));var s=t("b775"),r={getAppView:"/api/user/app/app/view",updateApp:"/api/user/app/app/update",changeVersion:"/api/user/app/app/changeVersion",getAppMobanView:"/api/user/app/moban/view",updateAppMoban:"/api/user/app/moban/update",installs:"/api/user/app/install/list",taskItems:"/api/user/app/push/task_list",pushItems:"/api/user/app/push/list",pushView:"/api/user/app/push/view",pushUpdateDetail:"/api/user/app/push/update_detail",pushUpdate:"/api/user/app/push/update",getPackageItemsUpdate:"/api/user/app/package/list_update",getPackageItems:"/api/user/app/package/list",getPackageView:"/api/user/app/package/view",getPackageViewLog:"/api/user/app/package/view_log",updatePackageUpdate:"/api/user/app/package/update",packagePack:"/api/user/app/package/pack",updatePackageUpdateAndroid:"/api/user/app/package/update_android",updatePackageAndroidUpdate:"/api/user/app/package/update_android_update",updatePackageUpdateUpdateAndroid:"/api/user/app/package/update_update_android",updateDownloadUpdate:"/api/user/app/package/update_download",getPubView:"/api/user/app/pub/view",updatePubChange:"/api/user/app/pub/change",getThirdassessView:"/api/user/app/thirdassess/view",updateThirdassessUpdate:"/api/user/app/thirdassess/update",updatePackageUploadAndroidUpdate:"/api/user/app/package/upload_android_update"};function i(e){return Object(s["b"])({url:r.updatePackageUploadAndroidUpdate,method:"post",data:e})}function n(e){return Object(s["b"])({url:r.pushView,method:"post",data:e})}function o(e){return Object(s["b"])({url:r.updateDownloadUpdate,method:"post",data:e})}function p(e){return Object(s["b"])({url:r.updateThirdassessUpdate,method:"post",data:e})}function l(e){return Object(s["b"])({url:r.getThirdassessView,method:"post",data:e})}function d(e){return Object(s["b"])({url:r.updatePackageUpdateUpdateAndroid,method:"post",data:e})}function c(e){return Object(s["b"])({url:r.updatePackageAndroidUpdate,method:"post",data:e})}function u(e){return Object(s["b"])({url:r.updatePackageUpdateAndroid,method:"post",data:e})}function m(e){return Object(s["b"])({url:r.packagePack,method:"post",data:e})}function h(e){return Object(s["b"])({url:r.updatePackageUpdate,method:"post",data:e})}function f(e){return Object(s["b"])({url:r.getPackageViewLog,method:"post",data:e})}function g(e){return Object(s["b"])({url:r.getPackageView,method:"post",data:e})}function b(e){return Object(s["b"])({url:r.getPackageItems,method:"post",data:e})}function _(e){return Object(s["b"])({url:r.getPackageItemsUpdate,method:"post",data:e})}function v(e){return Object(s["b"])({url:r.pushUpdate,method:"post",data:e})}function w(e){return Object(s["b"])({url:r.pushUpdateDetail,method:"post",data:e})}function y(e){return Object(s["b"])({url:r.updateApp,method:"post",data:e})}function k(e){return Object(s["b"])({url:r.getAppView,method:"post",data:e})}function C(e){return Object(s["b"])({url:r.installs,method:"post",data:e})}function x(e){return Object(s["b"])({url:r.taskItems,method:"post",data:e})}function O(e){return Object(s["b"])({url:r.pushItems,method:"post",data:e})}},"4cad":function(e,a,t){"use strict";t.r(a);var s=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("a-card",{staticStyle:{width:"100%"},attrs:{bordered:!1,tabList:e.tabListNoTitle,activeTabKey:e.noTitleKey},on:{tabChange:function(a){return e.handleTabChange(a,"noTitleKey")}}},["base"===e.noTitleKey?t("Base-page"):e._e()],1)},r=[],i=t("5530"),n=(t("0d03"),t("c32d")),o=t.n(n),p=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("a-card",{attrs:{"body-style":{padding:"24px 2px"},bordered:!1}},[t("a-form",{attrs:{form:e.form},on:{submit:e.handleSubmit}},[t("a-form-item",{attrs:{label:"App名称",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["name",{rules:[{required:!0,message:"请输入名字"}]}],expression:"['name', {rules: [{required: true, message: '请输入名字'}]}]"}],staticStyle:{width:"600px"},attrs:{placeholder:"**App名称"}})],1),t("a-form-item",{attrs:{label:"APP图标",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["icon",{rules:[{required:!1,message:""}]}],expression:"['icon', {rules: [{required: false, message: ''}]}]"}],attrs:{type:"hidden",placeholder:"**"}}),t("a-upload",{attrs:{name:"file",multiple:!0,action:"https://www.youdanhui.com/api/common/upload/upload",data:{hpt_token:e.token},beforeUpload:e.beforeUpload},on:{change:e.handleChange}},[t("div",{staticStyle:{padding:"20px 0"}},[t("div",{staticClass:"app-icon"},[t("i",{staticClass:"cmsfont icon-jia"}),e.iconUrl?t("img",{attrs:{src:e.iconUrl}}):e._e(),t("a",{staticClass:"icons-hover-bg"},[e._v(" 图标上传 ")])])])])],1),t("a-form-item",{attrs:{label:"启动画面",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["startup_pic",{rules:[{required:!1,message:""}]}],expression:"['startup_pic', {rules: [{required: false, message: ''}]}]"}],attrs:{type:"hidden",placeholder:"**"}}),t("a-upload",{attrs:{name:"file",multiple:!0,action:"https://www.youdanhui.com/api/common/upload/upload",data:{hpt_token:e.token},beforeUpload:e.beforeUploadStartUpPic},on:{change:e.handleChangeStartUpPic}},[t("div",{staticStyle:{padding:"20px 0"}},[t("div",{staticClass:"app-icon static-icon"},[t("i",{staticClass:"cmsfont icon-jia"}),e.startupUrl?t("img",{attrs:{src:e.startupUrl}}):e._e(),t("a",{staticClass:"icons-hover-bg"},[e._v(" 图标上传 ")])])])])],1),t("a-form-item",{attrs:{label:"简介描述",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[t("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["brief",{rules:[{required:!1,message:""}]}],expression:"[ 'brief', {rules: [{ required: false, message: '' }]} ]"}],attrs:{rows:"10",placeholder:""}})],1),t("a-form-item",{staticStyle:{"text-align":"center"},attrs:{wrapperCol:{span:24}}},[t("a-button",{attrs:{htmlType:"submit",type:"primary"}},[e._v("保存")])],1)],1)],1)},l=[],d=(t("b0c0"),t("88bc")),c=t.n(d),u=t("4875"),m=t("ac0d"),h=t("5880"),f={mixins:[m["b"],m["c"]],components:{},computed:Object(i["a"])(Object(i["a"])({},Object(h["mapGetters"])(["token"])),{},{iconUrl:function(){return this.page.icon.url?this.page.icon.url:""},startupUrl:function(){return this.page.startup_pic.url?this.page.startup_pic.url:""}}),data:function(){return{labelCol:{xs:{span:24},sm:{span:2}},wrapperCol:{xs:{span:24},sm:{span:22}},form:this.$form.createForm(this),page:{uploading:!0,icon:{url:""},startup_pic:{url:""}}}},created:function(){},mounted:function(){this.init()},methods:{init:function(){this.query()},query:function(){var e=this,a=this.form.setFieldsValue;Object(u["a"])().then((function(t){t.data.app&&e.$nextTick((function(){var s=c()(t.data.app,["name","icon","startup_pic","brief"]);s.icon=JSON.stringify(t.data.app.icon),s.startup_pic=JSON.stringify(t.data.app.startup_pic),a(s),e.page.icon.url=t.data.app.icon.url,e.page.startup_pic.url=t.data.app.startup_pic.url}))}))},handleSubmit:function(e){var a=this;e.preventDefault(),this.form.setFieldsValue({icon:JSON.stringify(this.page.icon),startup_pic:JSON.stringify(this.page.startup_pic)}),this.form.validateFields((function(e,t){e||Object(u["n"])(t).then((function(e){0===e.code&&a.$message.success("保存成功")}))}))},handleChange:function(e){e.file.status,"done"===e.file.status?this.page.icon.url=e.file.response.data.item.img:"error"===e.file.status&&this.$message.error("".concat(e.file.name," 上传文件失败."))},beforeUpload:function(e){var a="image/jpg"===e.type||"image/jpeg"===e.type||"image/png"===e.type||"image/gif"===e.type;a||this.$message.error("上传图片只能是jpg/png/gif格式!");var t=e.size/1024/1024<2;return t||this.$message.error("文件大小不能超过 2MB!"),a&&t},handleChangeStartUpPic:function(e){e.file.status,"done"===e.file.status?this.page.startup_pic.url=e.file.response.data.item.img:"error"===e.file.status&&this.$message.error("".concat(e.file.name," 上传文件失败."))},beforeUploadStartUpPic:function(e){var a="image/jpg"===e.type||"image/jpeg"===e.type||"image/png"===e.type||"image/gif"===e.type;a||this.$message.error("上传图片只能是jpg/png/gif格式!");var t=e.size/1024/1024<2;return t||this.$message.error("文件大小不能超过 2MB!"),a&&t}}},g=f,b=(t("4088"),t("2877")),_=Object(b["a"])(g,p,l,!1,null,"6b13ff22",null),v=_.exports,w={name:"Page",components:{BasePage:v},data:function(){return{noTitleKey:"base",tabListNoTitle:[{key:"base",tab:"基础设置"}]}},created:function(){},computed:Object(i["a"])({},Object(h["mapGetters"])(["funApp"])),methods:{handleTabChange:function(e,a){this[a]=e},query:function(){this.$refs.table.refresh(!0)},onSelectChange:function(e,a){this.selectedRowKeys=e,this.selectedRows=a},toggleAdvanced:function(){this.advanced=!this.advanced},resetSearchForm:function(){this.queryParam={date:o()(new Date)}}}},y=w,k=Object(b["a"])(y,s,r,!1,null,null,null);a["default"]=k.exports},"547c":function(e,a,t){"use strict";t("af82")},"6e61":function(e,a,t){},"7c3a":function(e,a,t){},"81d1":function(e,a,t){"use strict";var s=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"head-info",class:e.center&&"center"},[t("span",[e._t("title",(function(){return[e._v(e._s(e.title))]}))],2),t("p",[e._t("content",(function(){return[e._v(e._s(e.content))]}))],2),e.bordered?t("em"):e._e()])},r=[],i={name:"HeadInfo",props:{title:{type:String,default:""},content:{type:String,default:""},bordered:{type:Boolean,default:!1},center:{type:Boolean,default:!0}}},n=i,o=(t("4087"),t("2877")),p=Object(o["a"])(n,s,r,!1,null,"3fd6244e",null);a["a"]=p.exports},8302:function(e,a,t){"use strict";t("0707")},"88bc":function(e,a,t){(function(a){var t=1/0,s=9007199254740991,r="[object Arguments]",i="[object Function]",n="[object GeneratorFunction]",o="[object Symbol]",p="object"==typeof a&&a&&a.Object===Object&&a,l="object"==typeof self&&self&&self.Object===Object&&self,d=p||l||Function("return this")();function c(e,a,t){switch(t.length){case 0:return e.call(a);case 1:return e.call(a,t[0]);case 2:return e.call(a,t[0],t[1]);case 3:return e.call(a,t[0],t[1],t[2])}return e.apply(a,t)}function u(e,a){var t=-1,s=e?e.length:0,r=Array(s);while(++t<s)r[t]=a(e[t],t,e);return r}function m(e,a){var t=-1,s=a.length,r=e.length;while(++t<s)e[r+t]=a[t];return e}var h=Object.prototype,f=h.hasOwnProperty,g=h.toString,b=d.Symbol,_=h.propertyIsEnumerable,v=b?b.isConcatSpreadable:void 0,w=Math.max;function y(e,a,t,s,r){var i=-1,n=e.length;t||(t=O),r||(r=[]);while(++i<n){var o=e[i];a>0&&t(o)?a>1?y(o,a-1,t,s,r):m(r,o):s||(r[r.length]=o)}return r}function k(e,a){return e=Object(e),C(e,a,(function(a,t){return t in e}))}function C(e,a,t){var s=-1,r=a.length,i={};while(++s<r){var n=a[s],o=e[n];t(o,n)&&(i[n]=o)}return i}function x(e,a){return a=w(void 0===a?e.length-1:a,0),function(){var t=arguments,s=-1,r=w(t.length-a,0),i=Array(r);while(++s<r)i[s]=t[a+s];s=-1;var n=Array(a+1);while(++s<a)n[s]=t[s];return n[a]=i,c(e,this,n)}}function O(e){return q(e)||S(e)||!!(v&&e&&e[v])}function j(e){if("string"==typeof e||K(e))return e;var a=e+"";return"0"==a&&1/e==-t?"-0":a}function S(e){return P(e)&&f.call(e,"callee")&&(!_.call(e,"callee")||g.call(e)==r)}var q=Array.isArray;function A(e){return null!=e&&I(e.length)&&!$(e)}function P(e){return T(e)&&A(e)}function $(e){var a=U(e)?g.call(e):"";return a==i||a==n}function I(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=s}function U(e){var a=typeof e;return!!e&&("object"==a||"function"==a)}function T(e){return!!e&&"object"==typeof e}function K(e){return"symbol"==typeof e||T(e)&&g.call(e)==o}var R=x((function(e,a){return null==e?{}:k(e,u(y(a,1),j))}));e.exports=R}).call(this,t("c8ba"))},"8d7d":function(e,a,t){"use strict";t.r(a);var s=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("a-card",{attrs:{bordered:!1,title:"安装统计"}},[t("div",{staticClass:"table-page-search-wrapper"},[t("a-form",{attrs:{layout:"inline"}},[t("a-row",{attrs:{gutter:48}},[t("a-col",{attrs:{md:8,sm:24}},[t("a-form-item",{attrs:{label:"日期"}},[t("a-range-picker",{staticStyle:{width:"100%"},attrs:{ranges:{"今日":[e.moment(),e.moment()],"本周":[e.moment().startOf("week"),e.moment().endOf("week")],"当月":[e.moment().startOf("month"),e.moment().endOf("month")]}},model:{value:e.queryParam.createRangePicker,callback:function(a){e.$set(e.queryParam,"createRangePicker",a)},expression:"queryParam.createRangePicker"}})],1)],1),t("a-col",{attrs:{md:6,sm:24}},[t("span",{staticClass:"table-page-search-submitButtons",style:{overflow:"hidden"}||{}},[t("a-button",{attrs:{type:"primary"},on:{click:function(a){return e.$refs.table.refresh(!0)}}},[e._v("查询")])],1)])],1)],1)],1),t("s-table",{ref:"table",attrs:{size:"default",rowKey:function(e){return e.id},columns:e.columns,data:e.loadData,showPagination:"auto",bordered:""},scopedSlots:e._u([{key:"goodslink",fn:function(a,s){return[t("a",{attrs:{target:"_blank",href:"https://detail.tmall.com/item.htm?id="+s.num_iid}},[e._v(e._s(a))])]}},{key:"money",fn:function(a,s){return[t("a",{attrs:{target:"_blank",href:"https://uland.taobao.com/quan/detail?sellerId="+s.user_num_id+"&activityId="+s.activity_id}},[e._v("查看")])]}},{key:"price",fn:function(a,s){return[t("a",{attrs:{target:"_blank",href:"https://www.youdanhui.com/?coupon=1&q="+encodeURIComponent("https://detail.tmall.com/item.htm?id="+s.num_iid)}},[e._v(e._s(a))])]}},{key:"image",fn:function(e,a){return[t("a",{attrs:{target:"_blank",href:"https://detail.tmall.com/item.htm?id="+a.num_iid}},[t("img",{staticStyle:{"max-width":"80px"},attrs:{src:a.pic_url}})])]}},{key:"status",fn:function(a){return t("span",{},[t("a-badge",{attrs:{status:e._f("statusTypeFilter")(a),text:e._f("statusFilter")(a)}})],1)}},{key:"income",fn:function(a){return t("span",{},[t("ellipsis",{attrs:{length:4,tooltip:""}},[e._v(e._s(a))])],1)}},{key:"action",fn:function(a,s){return t("span",{},[[0===s.status?t("a",{on:{click:function(a){return e.handlePass(s)}}},[e._v("通过")]):e._e()]],2)}}])})],1)},r=[],i=t("5530"),n=(t("0d03"),t("c32d")),o=t.n(n),p=t("2af9"),l=t("4875"),d=t("5880"),c={name:"Page",components:{STable:p["n"],Ellipsis:p["e"]},data:function(){var e=this;return{mdl:{},advanced:!1,queryParam:{},columns:[{title:"时间",dataIndex:"created_at",width:"160px"},{title:"client_id",dataIndex:"client_id"},{title:"会员",dataIndex:"member.user_name",width:120},{title:"vendor",dataIndex:"vendor",width:80},{title:"model",align:"center",dataIndex:"model",width:180},{title:"系统",dataIndex:"platform",width:100,align:"center"}],loadData:function(a){return Object(l["b"])(Object.assign(a,e.queryParam)).then((function(e){return e.data}))},selectedRowKeys:[],selectedRows:[],optionAlertShow:!1}},created:function(){},computed:Object(i["a"])({},Object(d["mapGetters"])(["funApp"])),methods:{moment:o.a,query:function(){this.$refs.table.refresh(!0)},onSelectChange:function(e,a){this.selectedRowKeys=e,this.selectedRows=a},toggleAdvanced:function(){this.advanced=!this.advanced},resetSearchForm:function(){this.queryParam={date:o()(new Date)}}}},u=c,m=t("2877"),h=Object(m["a"])(u,s,r,!1,null,null,null);a["default"]=h.exports},"8e58":function(e,a,t){"use strict";t.r(a);var s=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("a-card",{staticStyle:{width:"100%"},attrs:{"body-style":{padding:"30px 0px"},bordered:!1,tabList:e.tabListNoTitle,activeTabKey:e.noTitleKey},on:{tabChange:function(a){return e.handleTabChange(a,"noTitleKey")}}},["items"===e.noTitleKey?t("items-page"):"task"===e.noTitleKey?t("task-page"):"data"===e.noTitleKey?t("Data-page"):e._e()],1)},r=[],i=t("5530"),n=(t("0d03"),t("c32d")),o=t.n(n),p=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("a-card",{attrs:{bordered:!1}},[t("div",{staticClass:"table-page-search-wrapper"},[t("a-form",{attrs:{layout:"inline"}},[t("a-row",{attrs:{gutter:48}},[t("a-col",{attrs:{md:8,sm:24}},[t("a-form-item",{attrs:{label:"创建时间"}},[t("a-range-picker",{staticStyle:{width:"100%"},attrs:{ranges:{"今日":[e.moment(),e.moment()],"本周":[e.moment().startOf("week"),e.moment().endOf("week")],"当月":[e.moment().startOf("month"),e.moment().endOf("month")]}},model:{value:e.queryParam.createRangePicker,callback:function(a){e.$set(e.queryParam,"createRangePicker",a)},expression:"queryParam.createRangePicker"}})],1)],1),t("a-col",{attrs:{md:6,sm:24}},[t("span",{staticClass:"table-page-search-submitButtons",style:{overflow:"hidden"}||{}},[t("a-button",{attrs:{type:"primary"},on:{click:function(a){return e.$refs.table.refresh(!0)}}},[e._v("查询")])],1)])],1)],1)],1),t("div",{staticClass:"table-operator",staticStyle:{"margin-bottom":"30px"}},[t("a-button",{attrs:{type:"primary",icon:"plus"},on:{click:function(a){return e.$refs.modal.edit({})}}},[e._v("发布推送消息")])],1),t("s-table",{ref:"table",attrs:{size:"default",rowKey:function(e){return e.id},columns:e.columns,data:e.loadData,showPagination:"auto",bordered:""},scopedSlots:e._u([{key:"name",fn:function(a,s){return[t("a",{attrs:{target:"_blank",href:s.url}},[t("ellipsis",{attrs:{length:30,tooltip:""}},[e._v(e._s(a))])],1)]}},{key:"platformName",fn:function(a,s){return["WechatTimeLine"==s.platform?t("span",[e._v("朋友圈")]):e._e(),"WechatSession"==s.platform?t("span",[e._v("群好友")]):e._e()]}},{key:"action",fn:function(a,s){return t("span",{},[[0===s.status?t("a",{on:{click:function(a){return e.handlePass(s)}}},[e._v("通过")]):e._e()]],2)}}])}),t("edit-modal",{ref:"modal",on:{ok:e.query}})],1)},l=[],d=t("2af9"),c=t("4875"),u=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("a-modal",{attrs:{title:"发布消息",width:600,visible:e.visible,confirmLoading:e.confirmLoading},on:{cancel:e.handleCancel}},[t("a-spin",{attrs:{spinning:e.confirmLoading}},[t("a-form",{attrs:{form:e.form}},[t("div",[t("a-form-item",{attrs:{label:"标题",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["title",{rules:[{required:!0,message:""}]}],expression:"['title', {rules: [{required: true, message: ''}]}]"}],attrs:{placeholder:"**标题"}})],1),t("a-form-item",{attrs:{label:"内容",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[t("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["content",{rules:[{required:!0,message:"请输入内容"}]}],expression:"['content', {rules: [{required: true, message: '请输入内容'}]}]"}],attrs:{rows:4,placeholder:"文案，精美简洁的文案，有利于客户成交"}})],1),t("a-form-item",{attrs:{label:"图片",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["pic_url",{rules:[{required:!1,message:""}]}],expression:"['pic_url', {rules: [{ required: false, message: '' }]} ]"}],attrs:{placeholder:"**"},on:{change:e.changeImg}}),t("a-upload",{attrs:{name:"file",multiple:!0,action:"https://www.youdanhui.com/api/common/upload/upload",data:{hpt_token:e.token},beforeUpload:e.beforeUpload},on:{change:e.handleChange}},[t("a-button",[t("a-icon",{attrs:{type:"upload"}}),e._v("上传 ")],1)],1)],1)],1)])],1),t("template",{slot:"footer"},[t("p",[t("a-button",{key:"forward",attrs:{loading:e.confirmLoading,type:"primary",block:""},on:{click:function(a){return e.handleSubmit(0)}}},[e._v("立即推送")])],1),t("p",[t("a-button",{key:"forward",attrs:{loading:e.confirmLoading,type:"primary",block:""},on:{click:function(a){return e.handleSubmit(1)}}},[e._v("添加到推送库")])],1)])],2)},m=[],h=(t("b0c0"),t("2934")),f=t("5880"),g={name:"EditModal",components:{},computed:Object(i["a"])({},Object(f["mapGetters"])(["token"])),data:function(){return{labelCol:{xs:{span:24},sm:{span:3}},wrapperCol:{xs:{span:24},sm:{span:21}},visible:!1,confirmLoading:!1,mdl:{},form:this.$form.createForm(this),content:"",cats:[],previewImg:""}},created:function(){this.init()},methods:{init:function(){var e=this;Object(h["c"])().then((function(a){a.data.items&&(e.cats=a.data.items)}))},edit:function(e){var a=this;this.visible=!0,this.$nextTick((function(){a.form.resetFields()}))},handleSubmit:function(e){var a=this,t=this.form.validateFields;this.confirmLoading=!0,t((function(t,s){t?a.confirmLoading=!1:Object(c["k"])(Object.assign(s,{task:e})).then((function(e){0===e.code&&(1===status?a.$message.success("提交成功"):a.$message.success("保存成功"),a.$emit("ok",s),a.visible=!1),a.confirmLoading=!1}))}))},handleChange:function(e){e.file.status,"done"===e.file.status?this.form.setFieldsValue({pic_url:e.file.response.data.item.img}):"error"===e.file.status&&this.$message.error("".concat(e.file.name," 上传文件失败."))},beforeUpload:function(e){var a="image/jpg"===e.type||"image/jpeg"===e.type||"image/png"===e.type||"image/gif"===e.type;a||this.$message.error("上传图片只能是jpg/png/gif格式!");var t=e.size/1024/1024<2;return t||this.$message.error("文件大小不能超过 2MB!"),a&&t},handleCancel:function(){this.visible=!1},setContent:function(e){var a=this.form.setFieldsValue;this.$nextTick((function(){a({content:e.content})}))},setPic:function(e){var a=this.form.setFieldsValue;this.$nextTick((function(){a({pic_url:e})})),this.previewImg=e},changeValue:function(e){var a=e.target.value;this.href=a},changeImg:function(e){var a=e.target.value;this.previewImg=a}}},b=g,_=(t("d685"),t("2877")),v=Object(_["a"])(b,u,m,!1,null,"33bced47",null),w=v.exports,y={name:"Brand",components:{STable:d["n"],EditModal:w,Ellipsis:d["e"]},data:function(){var e=this;return{mdl:{},advanced:!1,queryParam:{},columns:[{title:"标题",dataIndex:"title",width:150},{title:"内容",dataIndex:"content"},{title:"状态",dataIndex:"status_name",width:80},{title:"时间",align:"center",dataIndex:"created_at",width:180},{title:"操作",dataIndex:"action",fixed:"right",width:50,align:"center"}],loadData:function(a){return Object(c["j"])(Object.assign(a,e.queryParam)).then((function(e){return e.data}))},selectedRowKeys:[],selectedRows:[],optionAlertShow:!1}},created:function(){},methods:{moment:o.a,query:function(){this.$refs.table.refresh(!0)},onSelectChange:function(e,a){this.selectedRowKeys=e,this.selectedRows=a},toggleAdvanced:function(){this.advanced=!this.advanced},resetSearchForm:function(){this.queryParam={date:o()(new Date)}}}},k=y,C=Object(_["a"])(k,p,l,!1,null,null,null),x=C.exports,O=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("a-card",{attrs:{bordered:!1}},[t("a-form",{attrs:{form:e.form},on:{submit:e.handleSubmit}},[t("a-form-item",{attrs:{label:"新用户提醒",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["notice_install",{initialValue:0,rules:[{required:!1,message:""}]}],expression:"['notice_install', {initialValue: 0,rules: [{required: false, message: ''}]}]"}],staticStyle:{width:"400px"}},[t("span",{attrs:{slot:"addonAfter"},slot:"addonAfter"},[e._v("有新用户安卓app，给用户发送的消息提醒")])])],1),t("a-form-item",{attrs:{label:"个推推送通道",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[t("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["push_igetui",{rules:[{required:!1}]}],expression:"[ 'push_igetui',{rules: [{ required : false }]} ]"}],staticStyle:{width:"120px"}},[t("a-select-option",{attrs:{value:0}},[e._v("关闭")]),t("a-select-option",{attrs:{value:1}},[e._v("开通")])],1)],1),t("a-form-item",{attrs:{label:"友盟推送通道",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[t("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["push_umeng",{rules:[{required:!1}]}],expression:"[ 'push_umeng',{rules: [{ required : false }]} ]"}],staticStyle:{width:"120px"}},[t("a-select-option",{attrs:{value:0}},[e._v("关闭")]),t("a-select-option",{attrs:{value:1}},[e._v("开通")])],1)],1),t("a-form-item",{attrs:{label:"信鸽推送通道",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[t("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["push_xg",{rules:[{required:!1}]}],expression:"[ 'push_xg',{rules: [{ required : false }]} ]"}],staticStyle:{width:"120px"}},[t("a-select-option",{attrs:{value:0}},[e._v("关闭")]),t("a-select-option",{attrs:{value:1}},[e._v("开通")])],1)],1),t("a-form-item",{attrs:{label:"任务间隔时间",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["task_times",{initialValue:0,rules:[{required:!1,message:""}]}],expression:"['task_times', {initialValue: 0,rules: [{required: false, message: ''}]}]"}],staticStyle:{width:"600px"},attrs:{placeholder:"任务间隔秒"}},[t("span",{attrs:{slot:"addonAfter"},slot:"addonAfter"},[e._v("建议设置2小时(7200)以上,群推任务建议每天10个以内")])])],1),t("a-form-item",{attrs:{label:"任务每天开始时间",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[t("a-time-picker",{directives:[{name:"decorator",rawName:"v-decorator",value:["task_day_start_time",{rules:[{required:!1,message:""}]}],expression:"['task_day_start_time', {rules: [{required: false, message: ''}]}]"}],attrs:{format:"HH:mm:ss"}})],1),t("a-form-item",{attrs:{label:"任务每天结束时间",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[t("a-time-picker",{directives:[{name:"decorator",rawName:"v-decorator",value:["task_day_end_time",{rules:[{required:!1,message:""}]}],expression:"['task_day_end_time', {rules: [{required: false, message: ''}]}]"}],attrs:{format:"HH:mm:ss"}})],1),t("a-form-item",{attrs:{wrapperCol:{span:12}}},[t("a-button",{attrs:{htmlType:"submit",type:"primary"}},[e._v("保存")])],1)],1)],1)},j=[],S=t("88bc"),q=t.n(S),A=t("ac0d"),P={mixins:[A["b"],A["c"]],components:{},computed:Object(i["a"])({},Object(f["mapGetters"])(["token"])),data:function(){return{labelCol:{xs:{span:24},sm:{span:3}},wrapperCol:{xs:{span:24},sm:{span:21}},form:this.$form.createForm(this),page:{uploading:!0,push:{push_igetui:!1,push_umeng:!1,push_xg:!1}}}},created:function(){},mounted:function(){this.init()},methods:{init:function(){this.query()},query:function(){var e=this,a=this.form.setFieldsValue;Object(c["g"])().then((function(t){t.data.app_detail&&e.$nextTick((function(){var e=q()(t.data.app_detail,["notice_install","push_igetui","push_umeng","push_xg","task_times","task_day_start_time","task_day_end_time"]);e.task_day_start_time=o()(o()().format("YYYY-MM-DD")+" "+t.data.app_detail.task_day_start_time),e.task_day_end_time=o()(o()().format("YYYY-MM-DD")+" "+t.data.app_detail.task_day_end_time),a(e)}))}))},handleSubmit:function(e){var a=this;e.preventDefault(),this.form.validateFields((function(e,t){e||(t.task_day_start_time&&(t.task_day_start_time=o()(t.task_day_start_time).format("HH:mm:ss")),t.task_day_end_time&&(t.task_day_end_time=o()(t.task_day_end_time).format("HH:mm:ss")),Object(c["l"])(t).then((function(e){0===e.code&&a.$message.success("保存成功")})))}))},handleChange:function(e){e.file.status,"done"===e.file.status?this.form.setFieldsValue({logoTxt:e.file.response.data.item.img}):"error"===e.file.status&&this.$message.error("".concat(e.file.name," 上传文件失败."))},beforeUpload:function(e){var a="image/jpg"===e.type||"image/jpeg"===e.type||"image/png"===e.type||"image/gif"===e.type;a||this.$message.error("上传图片只能是jpg/png/gif格式!");var t=e.size/1024/1024<2;return t||this.$message.error("文件大小不能超过 2MB!"),a&&t}}},$=P,I=Object(_["a"])($,O,j,!1,null,null,null),U=I.exports,T=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("a-card",{attrs:{bordered:!1}},[t("div",{staticClass:"table-page-search-wrapper"},[t("a-form",{attrs:{layout:"inline"}},[t("a-row",{attrs:{gutter:48}},[t("a-col",{attrs:{md:8,sm:24}},[t("a-form-item",{attrs:{label:"创建时间"}},[t("a-range-picker",{staticStyle:{width:"100%"},attrs:{ranges:{"今日":[e.moment(),e.moment()],"本周":[e.moment().startOf("week"),e.moment().endOf("week")],"当月":[e.moment().startOf("month"),e.moment().endOf("month")]}},model:{value:e.queryParam.createRangePicker,callback:function(a){e.$set(e.queryParam,"createRangePicker",a)},expression:"queryParam.createRangePicker"}})],1)],1),t("a-col",{attrs:{md:6,sm:24}},[t("span",{staticClass:"table-page-search-submitButtons",style:{overflow:"hidden"}||{}},[t("a-button",{attrs:{type:"primary"},on:{click:function(a){return e.$refs.table.refresh(!0)}}},[e._v("查询")])],1)])],1)],1)],1),t("div",{staticClass:"table-operator",staticStyle:{"margin-bottom":"30px"}},[t("a-button",{attrs:{type:"primary",icon:"plus"},on:{click:function(a){return e.$refs.modal.edit({})}}},[e._v("发布推送消息")])],1),t("s-table",{ref:"table",attrs:{size:"default",rowKey:function(e){return e.id},columns:e.columns,data:e.loadData,showPagination:"auto",bordered:""},scopedSlots:e._u([{key:"name",fn:function(a,s){return[t("a",{attrs:{target:"_blank",href:s.url}},[t("ellipsis",{attrs:{length:30,tooltip:""}},[e._v(e._s(a))])],1)]}},{key:"platformName",fn:function(a,s){return["WechatTimeLine"==s.platform?t("span",[e._v("朋友圈")]):e._e(),"WechatSession"==s.platform?t("span",[e._v("群好友")]):e._e()]}},{key:"action",fn:function(a,s){return t("span",{},[[0===s.status?t("a",{on:{click:function(a){return e.handlePass(s)}}},[e._v("通过")]):e._e()]],2)}}])}),t("edit-modal",{ref:"modal",on:{ok:e.query}})],1)},K=[],R={name:"Brand",components:{STable:d["n"],EditModal:w,Ellipsis:d["e"]},data:function(){var e=this;return{mdl:{},advanced:!1,queryParam:{},columns:[{title:"标题",dataIndex:"title",fixed:"left",width:150},{title:"内容",dataIndex:"content"},{title:"状态",dataIndex:"status_name",width:80},{title:"时间",align:"center",dataIndex:"created_at",width:180},{title:"操作",dataIndex:"action",fixed:"right",width:50,align:"center"}],loadData:function(a){return Object(c["m"])(Object.assign(a,e.queryParam)).then((function(e){return e.data}))},selectedRowKeys:[],selectedRows:[],optionAlertShow:!1}},created:function(){},methods:{moment:o.a,query:function(){this.$refs.table.refresh(!0)},onSelectChange:function(e,a){this.selectedRowKeys=e,this.selectedRows=a},toggleAdvanced:function(){this.advanced=!this.advanced},resetSearchForm:function(){this.queryParam={date:o()(new Date)}}}},F=R,V=Object(_["a"])(F,T,K,!1,null,null,null),N=V.exports,L={name:"Page",components:{ItemsPage:x,TaskPage:N,DataPage:U},data:function(){return{noTitleKey:"items",tabListNoTitle:[{key:"items",tab:"发送记录"},{key:"task",tab:"任务记录"},{key:"data",tab:"设置"}]}},created:function(){},computed:Object(i["a"])({},Object(f["mapGetters"])(["funApp"])),methods:{handleTabChange:function(e,a){this[a]=e},query:function(){this.$refs.table.refresh(!0)},onSelectChange:function(e,a){this.selectedRowKeys=e,this.selectedRows=a},toggleAdvanced:function(){this.advanced=!this.advanced},resetSearchForm:function(){this.queryParam={date:o()(new Date)}}}},D=L,M=Object(_["a"])(D,s,r,!1,null,null,null);a["default"]=M.exports},af82:function(e,a,t){},d685:function(e,a,t){"use strict";t("6e61")},e4e0:function(e,a,t){"use strict";t.r(a);var s=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("a-card",{staticStyle:{width:"100%"},attrs:{"body-style":{padding:"30px 0px"},bordered:!1,tabList:e.tabListNoTitle,activeTabKey:e.noTitleKey},on:{tabChange:function(a){return e.handleTabChange(a,"noTitleKey")}}},["pack"===e.noTitleKey?t("pack-page"):e._e(),"data"===e.noTitleKey?t("data-page"):e._e(),"download"===e.noTitleKey?t("download-page"):e._e(),"log"===e.noTitleKey?t("log-page"):e._e()],1)},r=[],i=t("5530"),n=(t("0d03"),t("c32d")),o=t.n(n),p=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("a-card",{attrs:{bordered:!1}},[t("div",{staticClass:"table-page-search-wrapper"},[t("a-card",{attrs:{bordered:!1}},[t("a-row",[t("a-col",{attrs:{sm:8,xs:24}},[t("a-progress",{attrs:{type:"circle",percent:e.page.pack.android.percent,format:function(a){return a>0?""+e.page.pack.android.prompt+a+" %":""+e.page.pack.android.prompt}}}),0!=e.page.pack.android.status?t("p",[t("a-button",{attrs:{type:"primary",size:"small"},on:{click:function(a){return e.package_ok(1)}}},[e._v("安卓打包新版")])],1):e._e()],1),t("a-col",{attrs:{sm:8,xs:24}},[t("div",{staticClass:"item-block"},[t("img",{staticStyle:{width:"100px"},attrs:{src:e.page.qrcode.release}}),t("div",{staticClass:"btn"},[e._v(" 此为正式版本二维码，测试请点对应行扫码测试 "+e._s(e.page.pack.android.prompt)+" ")])])]),t("a-col",{attrs:{sm:8,xs:24}},[t("a-progress",{attrs:{type:"circle",percent:e.page.pack.ios.percent,format:function(a){return a>0?""+e.page.pack.ios.prompt+a+" %":""+e.page.pack.ios.prompt}}}),0!=e.page.pack.ios.status?t("p",[t("a-button",{attrs:{type:"primary",size:"small"},on:{click:function(a){return e.package_ok(2)}}},[e._v("苹果打包新版")])],1):e._e()],1)],1)],1)],1),t("s-table",{ref:"table",attrs:{size:"default",rowKey:function(e){return e.id},columns:e.columns,data:e.loadData,showPagination:"auto",bordered:""},scopedSlots:e._u([{key:"name",fn:function(a,s){return[t("a",{attrs:{target:"_blank",href:s.url}},[t("ellipsis",{attrs:{length:30,tooltip:""}},[e._v(e._s(a))])],1)]}},{key:"actionScan",fn:function(a,s){return t("span",{},[[s.download_url?t("a",{attrs:{target:"_blank",href:s.download_url}},[e._v("下载")]):e._e(),t("a-divider",{attrs:{type:"vertical"}}),s.download_url&&1===s.client_type?t("a",{on:{click:function(a){return e.android_scan(s)}}},[e._v("扫码测试")]):e._e()]],2)}},{key:"actionAndroidUpdate",fn:function(a,s){return t("span",{},[[s.download_url&&1===s.client_type?t("a",{on:{click:function(a){return e.update_android(s)}}},[e._v("设为安卓扫码正式版")]):e._e()]],2)}},{key:"action",fn:function(a,s){return t("span",{},[[s.download_url&&s.md5&&1===s.client_type?t("a",{on:{click:function(a){return e.android_upate_call(s,"")}}},[e._v("设为自动更新版")]):e._e()]],2)}}])}),t("a-modal",{attrs:{title:"扫码测试版本",visible:e.page.android_scan.modal_scan},on:{ok:e.handleOkScan,cancel:e.handleCancelScan}},[t("img",{staticStyle:{width:"200px"},attrs:{src:e.showScanImg}})]),t("a-modal",{attrs:{title:"设置版本自动升级",visible:e.page.android.modal_android_upate},on:{ok:e.android_upate_ok,cancel:e.android_upate_cancel}},[t("a-textarea",{attrs:{rows:"4",placeholder:"版本更新说明"},model:{value:e.page.android.update_content,callback:function(a){e.$set(e.page.android,"update_content",a)},expression:"page.android.update_content"}})],1)],1)},l=[],d=(t("4795"),t("81d1")),c=t("2af9"),u=t("4875"),m={name:"Brand",components:{HeadInfo:d["a"],STable:c["n"],Ellipsis:c["e"]},computed:{showScanImg:function(){if(this.page.android_scan.scan_download_url){var e="http://app.ishops.today/test.html?url="+encodeURIComponent(this.page.android_scan.scan_download_url);return"https://img.istyle.live/?w=300&url="+encodeURIComponent(e)}return""}},data:function(){var e=this;return{mdl:{},advanced:!1,queryParam:{},columns:[{title:"打包时间",dataIndex:"create_time"},{title:"版本",dataIndex:"version_name"},{title:"平台",dataIndex:"client_type",customRender:function(e,a){return 1===a.client_type?"安卓":"苹果"}},{title:"状态",dataIndex:"status",width:80,customRender:function(e,a){return 0===a.status?"打包中":1===a.status?"成功":"失败"}},{title:" ",dataIndex:"download_url",width:180,scopedSlots:{customRender:"actionAndroidUpdate"}},{title:" ",dataIndex:"",width:150,scopedSlots:{customRender:"actionScan"}},{title:" ",dataIndex:"",width:150,scopedSlots:{customRender:"action"}}],loadData:function(a){return Object(u["c"])(Object.assign(a,e.queryParam)).then((function(e){return e.data}))},selectedRowKeys:[],selectedRows:[],optionAlertShow:!1,page:{android_scan:{modal_scan:!1,scan_download_url:""},android:{modal_android_upate:!1,task_id:0,task_type:"",update_content:""},pack:{android:{percent:0,prompt:"",status:-1},ios:{percent:0,prompt:"",status:-1}},qrcode:{debug:"",release:""},packing:{android:!1,ios:!1},download:{ios_url:"",android_url:""},query:!1}}},created:function(){},mounted:function(){this.init()},destroyed:function(){this.page.query=!1},methods:{moment:o.a,init:function(){this.page.query=!0,this.query_view_log()},query:function(){this.$refs.table.refresh(!0)},onSelectChange:function(e,a){this.selectedRowKeys=e,this.selectedRows=a},toggleAdvanced:function(){this.advanced=!this.advanced},resetSearchForm:function(){this.queryParam={date:o()(new Date)}},android_scan:function(e){this.page.android_scan.modal_scan=!0,this.page.android_scan.scan_download_url=e.download_url},handleOkScan:function(e){this.page.android_scan.modal_scan=!1},handleCancelScan:function(e){this.page.android_scan.modal_scan=!1},update_android:function(e){var a=this;Object(u["r"])({task_id:e.id}).then((function(e){a.$message.success("配置成功")}))},android_upate_call:function(e,a){this.page.android.modal_android_upate=!0,this.page.android.task_id=e.id,this.page.android.task_type=a,this.page.android.update_content=""},android_upate_ok:function(){var e=this;Object(u["s"])({task_id:this.page.android.task_id,task_type:this.page.android.task_type,content:this.page.android.update_content}).then((function(a){0===a.code&&e.$message.success("保存成功"),e.page.android.modal_android_upate=!1}))},android_upate_cancel:function(){this.page.android.modal_android_upate=!1},query_view_log:function(){var e=this;this.page.query&&Object(u["f"])({}).then((function(a){var t=!1;a.data.app&&(a.data.app.android&&(e.page.download.android_url=a.data.app.android.download_url,e.page.pack.android.percent=a.data.app.android.percent,a.data.app.android.prompt&&(e.page.pack.android.prompt=a.data.app.android.prompt),e.page.pack.android.status=a.data.app.android.status,0===a.data.app.android.status?e.page.packing.android=!0:(!0===e.page.packing.android&&(t=!0),e.page.packing.android=!1)),a.data.app.ios&&(e.page.download.ios_url=a.data.app.ios.download_url,e.page.pack.ios.percent=a.data.app.ios.percent,a.data.app.ios.prompt&&(e.page.pack.ios.prompt=a.data.app.ios.prompt),e.page.pack.ios.status=a.data.app.ios.status,0===a.data.app.ios.status?e.page.packing.ios=!0:(!0===e.page.packing.ios&&(t=!0),e.page.packing.ios=!1))),a.data.qrcode&&(e.page.qrcode.debug=a.data.qrcode.debug,e.page.qrcode.release=a.data.qrcode.release),e.page.packing.android||e.page.packing.ios?setTimeout((function(){e.query_view_log()}),5e3):t&&e.$refs.table.refresh(!0)}))},package_ok:function(e){var a=this;this.$confirm({title:"打包确认对话框",content:"立即打包 ?",onOk:function(){Object(u["i"])({client_type:e}).then((function(e){a.$refs.table.refresh(!0),a.query_view_log()}))},onCancel:function(){}})}}},h=m,f=t("2877"),g=Object(f["a"])(h,p,l,!1,null,null,null),b=g.exports,_=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("a-card",{attrs:{bordered:!1}},[t("div",{staticClass:"table-page-search-wrapper"},[t("a-form",{attrs:{layout:"inline"}},[t("a-row",{attrs:{gutter:48}},[t("a-col",{attrs:{md:6,sm:24}},[t("a-form-item",{attrs:{label:"用户名"}},[t("a-input",{attrs:{placeholder:""},model:{value:e.queryParam.username,callback:function(a){e.$set(e.queryParam,"username",a)},expression:"queryParam.username"}})],1)],1),t("a-col",{attrs:{md:8,sm:24}},[t("a-form-item",{attrs:{label:"创建时间"}},[t("a-range-picker",{staticStyle:{width:"100%"},attrs:{ranges:{"今日":[e.moment(),e.moment()],"本周":[e.moment().startOf("week"),e.moment().endOf("week")],"当月":[e.moment().startOf("month"),e.moment().endOf("month")]}},model:{value:e.queryParam.createRangePicker,callback:function(a){e.$set(e.queryParam,"createRangePicker",a)},expression:"queryParam.createRangePicker"}})],1)],1),t("a-col",{attrs:{md:6,sm:24}},[t("span",{staticClass:"table-page-search-submitButtons",style:{overflow:"hidden"}||{}},[t("a-button",{attrs:{type:"primary"},on:{click:function(a){return e.$refs.table.refresh(!0)}}},[e._v("查询")])],1)])],1)],1)],1),t("div",{staticClass:"table-operator",staticStyle:{"margin-bottom":"30px"}},[t("a-button",{attrs:{type:"primary",icon:"plus"},on:{click:function(a){return e.$refs.modal.edit({})}}},[e._v("上传新包")])],1),t("s-table",{ref:"table",attrs:{size:"default",rowKey:function(e){return e.id},columns:e.columns,data:e.loadData,showPagination:"auto",bordered:""},scopedSlots:e._u([{key:"name",fn:function(a,s){return[t("a",{attrs:{target:"_blank",href:s.url}},[t("ellipsis",{attrs:{length:30,tooltip:""}},[e._v(e._s(a))])],1)]}},{key:"actionScan",fn:function(a,s){return t("span",{},[[s.url?t("a",{attrs:{target:"_blank",href:s.url}},[e._v("下载")]):e._e(),t("a-divider",{attrs:{type:"vertical"}}),s.url?t("a",{on:{click:function(a){return e.android_scan(s)}}},[e._v("扫码测试")]):e._e()]],2)}},{key:"actionAndroidUpdate",fn:function(a,s){return t("span",{},[[s.url?t("a",{on:{click:function(a){return e.update_android(s)}}},[e._v("设为安卓扫码正式版")]):e._e()]],2)}},{key:"action",fn:function(a,s){return t("span",{},[[s.url&&s.files_md5?t("a",{on:{click:function(a){return e.android_upate_call(s,"upload")}}},[e._v("设为自动更新版")]):e._e()]],2)}}])}),t("edit-modal",{ref:"modal",on:{ok:e.query}}),t("a-modal",{attrs:{title:"扫码测试版本",visible:e.page.android_scan.modal_scan},on:{ok:e.handleOkScan,cancel:e.handleCancelScan}},[t("img",{staticStyle:{width:"200px"},attrs:{src:e.showScanImg}})]),t("a-modal",{attrs:{title:"设置版本自动升级",visible:e.page.android.modal_android_upate},on:{ok:e.android_upate_ok,cancel:e.android_upate_cancel}},[t("a-textarea",{attrs:{rows:"4",placeholder:"版本更新说明"},model:{value:e.page.android.update_content,callback:function(a){e.$set(e.page.android,"update_content",a)},expression:"page.android.update_content"}})],1),t("edit-modal",{ref:"modal",on:{ok:e.query}})],1)},v=[],w=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("a-modal",{attrs:{title:"上传发布包",width:600,visible:e.visible,confirmLoading:e.confirmLoading},on:{cancel:e.handleCancel}},[t("a-spin",{attrs:{spinning:e.confirmLoading}},[t("a-form",{attrs:{form:e.form}},[t("div",[t("a-form-item",{staticStyle:{display:"none"},attrs:{label:"",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["app_name",{rules:[{required:!0,message:""}]}],expression:"['app_name', {rules: [{required: true, message: ''}]}]"}],attrs:{type:"hidden",placeholder:"**"}})],1),t("a-form-item",{staticStyle:{display:"none"},attrs:{label:"",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["files_md5",{rules:[{required:!0,message:""}]}],expression:"['files_md5', {rules: [{required: true, message: ''}]}]"}],attrs:{type:"hidden",placeholder:"**"}})],1),t("a-form-item",{staticStyle:{display:"none"},attrs:{label:"",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["file_size",{rules:[{required:!0,message:""}]}],expression:"['file_size', {rules: [{required: true, message: ''}]}]"}],attrs:{type:"hidden",placeholder:"**"}})],1),t("a-form-item",{attrs:{label:"包名",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["package_name",{rules:[{required:!0,message:""}]}],expression:"['package_name', {rules: [{required: true, message: ''}]}]"}],attrs:{placeholder:"**"}})],1),t("a-form-item",{attrs:{label:"版本编号",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["version_code",{rules:[{required:!0,message:""}]}],expression:"['version_code', {rules: [{required: true, message: ''}]}]"}],attrs:{placeholder:"**"}})],1),t("a-form-item",{attrs:{label:"版本",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["version_name",{rules:[{required:!0,message:""}]}],expression:"['version_name', {rules: [{required: true, message: ''}]}]"}],attrs:{placeholder:"**"}})],1),t("a-form-item",{attrs:{label:"文件包",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["url",{rules:[{required:!1,message:""}]}],expression:"['url', {rules: [{ required: false, message: '' }]} ]"}],attrs:{placeholder:"**安卓包的下载地址"},on:{change:e.changeImg}}),t("a-upload",{attrs:{name:"file",multiple:!0,action:"https://www.youdanhui.com/api/common/upload/apk",data:{hpt_token:e.token},beforeUpload:e.beforeUpload},on:{change:e.handleChange}},[t("a-button",[t("a-icon",{attrs:{type:"upload"}}),e._v("上传 ")],1)],1)],1)],1)])],1),t("template",{slot:"footer"},[t("a-button",{key:"forward",attrs:{loading:e.confirmLoading,type:"primary",block:""},on:{click:function(a){return e.handleSubmit(0)}}},[e._v("保存")])],1)],2)},y=[],k=(t("b0c0"),t("2934")),C=t("5880"),x={name:"EditModal",components:{},computed:Object(i["a"])({},Object(C["mapGetters"])(["token"])),data:function(){return{labelCol:{xs:{span:24},sm:{span:3}},wrapperCol:{xs:{span:24},sm:{span:21}},visible:!1,confirmLoading:!1,mdl:{},form:this.$form.createForm(this),content:"",href:"",cats:[],wenItems:[],pList:[],previewImg:""}},watch:{href:function(e){this.fetchGoodsInfoPreview()}},created:function(){this.init()},methods:{init:function(){var e=this;Object(k["c"])().then((function(a){a.data.items&&(e.cats=a.data.items)}))},edit:function(e){this.visible=!0,this.form.resetFields()},handleSubmit:function(e){var a=this,t=this.form.validateFields;this.confirmLoading=!0,t((function(t,s){t?a.confirmLoading=!1:Object(u["t"])(Object.assign(s,{task:e})).then((function(e){0===e.code&&(1===status?a.$message.success("提交成功"):a.$message.success("保存成功"),a.$emit("ok",s),a.visible=!1),a.confirmLoading=!1}))}))},handleChange:function(e){e.file.status,"done"===e.file.status?(this.form.setFieldsValue({url:e.file.response.data.item.img}),this.form.setFieldsValue({version_code:e.file.response.data.item.version_code}),this.form.setFieldsValue({version_name:e.file.response.data.item.version_name}),this.form.setFieldsValue({package_name:e.file.response.data.item.package_name}),this.form.setFieldsValue({app_name:e.file.response.data.item.app_name}),this.form.setFieldsValue({files_md5:e.file.response.data.item.files_md5}),this.form.setFieldsValue({file_size:e.file.response.data.item.file_size})):"error"===e.file.status&&this.$message.error("".concat(e.file.name," 上传文件失败."))},beforeUpload:function(e){var a="application/vnd.android.package-archive"===e.type;a||this.$message.error("上传图片只能是apk格式!");var t=e.size/1024/1024<100;return t||this.$message.error("文件大小不能超过 2MB!"),a&&t},handleCancel:function(){this.visible=!1},setContent:function(e){var a=this.form.setFieldsValue;this.$nextTick((function(){a({content:e.content})}))},setPic:function(e){var a=this.form.setFieldsValue;this.$nextTick((function(){a({pic_url:e})})),this.previewImg=e},changeValue:function(e){var a=e.target.value;this.href=a},changeImg:function(e){var a=e.target.value;this.previewImg=a}}},O=x,j=(t("8302"),Object(f["a"])(O,w,y,!1,null,"6e843115",null)),S=j.exports,q={name:"Brand",components:{STable:c["n"],EditModal:S,Ellipsis:c["e"]},computed:{showScanImg:function(){if(this.page.android_scan.scan_download_url){var e="http://app.ishops.today/test.html?url="+encodeURIComponent(this.page.android_scan.scan_download_url);return"https://img.istyle.live/?w=300&url="+encodeURIComponent(e)}return""}},data:function(){var e=this;return{mdl:{},advanced:!1,queryParam:{},columns:[{title:"上传时间",dataIndex:"created_at"},{title:"版本序号",dataIndex:"version_code"},{title:"版本",dataIndex:"version_name"},{title:"包名",dataIndex:"package_name"},{title:" ",dataIndex:"url",width:150,scopedSlots:{customRender:"actionScan"}},{title:" ",dataIndex:"",width:150,scopedSlots:{customRender:"actionAndroidUpdate"}},{title:" ",dataIndex:"",width:150,scopedSlots:{customRender:"action"}}],loadData:function(a){return Object(u["d"])(Object.assign(a,e.queryParam)).then((function(e){return e.data}))},selectedRowKeys:[],selectedRows:[],optionAlertShow:!1,page:{android_scan:{modal_scan:!1,scan_download_url:""},android:{modal_android_upate:!1,task_id:0,task_type:"",update_content:""}}}},created:function(){},methods:{moment:o.a,query:function(){this.$refs.table.refresh(!0)},onSelectChange:function(e,a){this.selectedRowKeys=e,this.selectedRows=a},toggleAdvanced:function(){this.advanced=!this.advanced},resetSearchForm:function(){this.queryParam={date:o()(new Date)}},android_scan:function(e){this.page.android_scan.modal_scan=!0,this.page.android_scan.scan_download_url=e.url},handleOkScan:function(e){this.page.android_scan.modal_scan=!1},handleCancelScan:function(e){this.page.android_scan.modal_scan=!1},update_android:function(e){var a=this;Object(u["p"])({id:e.id}).then((function(e){a.$message.success("配置成功")}))},android_upate_call:function(e,a){this.page.android.modal_android_upate=!0,this.page.android.task_id=e.id,this.page.android.task_type=a,this.page.android.update_content=""},android_upate_ok:function(){var e=this;Object(u["s"])({task_id:this.page.android.task_id,task_type:this.page.android.task_type,content:this.page.android.update_content}).then((function(a){0===a.code&&e.$message.success("保存成功"),e.page.android.modal_android_upate=!1}))},android_upate_cancel:function(){this.page.android.modal_android_upate=!1}}},A=q,P=Object(f["a"])(A,_,v,!1,null,null,null),$=P.exports,I=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("a-card",{attrs:{bordered:!1}},[t("a-form",{attrs:{form:e.form},on:{submit:e.handleSubmit}},[t("a-form-item",{attrs:{label:"安卓打包配置",labelCol:e.labelCol,wrapperCol:e.wrapperCol}}),t("a-form-item",{attrs:{label:"AppID",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["ios_app_id",{rules:[{required:!1,message:""}]}],expression:"['ios_app_id', {rules: [{required: false, message: ''}]}]"}],staticStyle:{width:"400px"}},[t("span",{attrs:{slot:"addonAfter"},slot:"addonAfter"},[e._v("注:bundle id")])])],1),t("a-form-item",{attrs:{label:"证书密码",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["ios_password",{rules:[{required:!1,message:""}]}],expression:"['ios_password', {rules: [{required: false, message: ''}]}]"}],staticStyle:{width:"400px"}},[t("span",{attrs:{slot:"addonAfter"},slot:"addonAfter"},[e._v("证书密码")])])],1),t("a-form-item",{attrs:{label:"profile文件",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["ios_mobileprovision",{rules:[{required:!1,message:""}]}],expression:"['ios_mobileprovision', {rules: [{required: false, message: ''}]}]"}],staticStyle:{width:"400px"},attrs:{type:"hidden"}}),t("a-row",[t("a-col",{attrs:{span:"4"}},[t("a-upload",{attrs:{name:"file",multiple:!0,action:"https://www.youdanhui.com/api/common/upload/upload",data:{hpt_token:e.token},beforeUpload:e.beforeUploadProvision},on:{change:e.handleChangeProvision}},[t("a-button",{attrs:{type:"primary"}},[t("a-icon",{attrs:{type:"upload"}}),e.page.ios.iosMobileprovision?t("span",[e._v("替换")]):t("span",[e._v("上传")])],1)],1)],1),t("a-col",{attrs:{span:"18",offset:"1"}},[e.page.ios.iosMobileprovision?t("a",{attrs:{target:"_blank",href:e.page.ios.iosMobileprovision}},[e._v("下载")]):e._e()])],1)],1),t("a-form-item",{attrs:{label:"私钥证书",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["ios_p12",{rules:[{required:!1,message:""}]}],expression:"['ios_p12', {rules: [{required: false, message: ''}]}]"}],staticStyle:{width:"400px"},attrs:{type:"hidden"}}),t("a-row",[t("a-col",{attrs:{span:"4"}},[t("a-upload",{attrs:{name:"file",multiple:!0,action:"https://www.youdanhui.com/api/common/upload/upload",data:{hpt_token:e.token},beforeUpload:e.beforeUploadP12},on:{change:e.handleChangeP12}},[t("a-button",{attrs:{type:"primary"}},[t("a-icon",{attrs:{type:"upload"}}),e.page.ios.iosP12?t("span",[e._v("替换")]):t("span",[e._v("上传")])],1)],1)],1),t("a-col",{attrs:{span:"18",offset:"1"}},[e.page.ios.iosP12?t("a",{attrs:{target:"_blank",href:e.page.ios.iosP12}},[e._v("下载")]):e._e()])],1)],1),t("a-form-item",{attrs:{label:"安卓打包配置",labelCol:e.labelCol,wrapperCol:e.wrapperCol}}),t("a-form-item",{attrs:{label:"安卓包名",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[e._v(" "+e._s(e.page.android.android_package_name)+" ")]),t("a-form-item",{attrs:{label:"应用签名",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[e._v(" "+e._s(e.page.android.keystore_md5)+" ")]),t("a-form-item",{attrs:{label:"md5",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[e._v(" "+e._s(e.page.android.md5)+" ")]),t("a-form-item",{attrs:{label:"sha1",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[e._v(" "+e._s(e.page.android.sha1)+" ")]),t("a-form-item",{attrs:{label:"sha256",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[e._v(" "+e._s(e.page.android.sha256)+" ")]),t("a-form-item",{attrs:{wrapperCol:{span:12}}},[t("a-button",{attrs:{htmlType:"submit",type:"primary"}},[e._v("保存")])],1)],1)],1)},U=[],T=t("88bc"),K=t.n(T),R=t("ac0d"),F={mixins:[R["b"],R["c"]],components:{},computed:Object(i["a"])(Object(i["a"])({},Object(C["mapGetters"])(["token"])),{},{iosMobileprovision:function(){return this.page.ios.ios_mobileprovision?this.page.ios.ios_mobileprovision:""}}),data:function(){return{labelCol:{xs:{span:24},sm:{span:3}},wrapperCol:{xs:{span:24},sm:{span:21}},form:this.$form.createForm(this),page:{uploading:!0,android:{android_package_name:"",keystore_md5:"",md5:"",sha1:"",sha256:""},ios:{iosMobileprovision:"",iosP12:""}}}},created:function(){},mounted:function(){this.init()},methods:{init:function(){this.query()},query:function(){var e=this,a=this.form.setFieldsValue;Object(u["e"])().then((function(t){t.data.app&&e.$nextTick((function(){a(K()(t.data.app,["ios_app_id","ios_mobileprovision","ios_p12","ios_password"])),e.page.ios.iosMobileprovision=t.data.app.ios_mobileprovision,e.page.ios.iosP12=t.data.app.ios_p12,e.page.android.android_package_name=t.data.app.android_package_name,e.page.android.keystore_md5=t.data.app.keystore_md5,e.page.android.md5=t.data.app.md5,e.page.android.sha1=t.data.app.sha1,e.page.android.sha256=t.data.app.sha256}))}))},handleSubmit:function(e){var a=this;e.preventDefault(),this.form.validateFields((function(e,t){e||Object(u["q"])(t).then((function(e){0===e.code&&a.$message.success("保存成功")}))}))},beforeUploadProvision:function(e){var a="application/x-apple-aspen-mobileprovision"===e.type;a||this.$message.error("上传图片只能是provision格式!");var t=e.size/1024/1024<2;return t||this.$message.error("文件大小不能超过 2MB!"),a&&t},beforeUploadP12:function(e){var a="application/x-pkcs12"===e.type;a||this.$message.error("上传图片只能是p12格式!");var t=e.size/1024/1024<2;return t||this.$message.error("文件大小不能超过 2MB!"),a&&t},handleChangeProvision:function(e){e.file.status,"done"===e.file.status?(this.form.setFieldsValue({ios_mobileprovision:e.file.response.data.item.img}),this.page.ios.iosMobileprovision=e.file.response.data.item.img):"error"===e.file.status&&this.$message.error("".concat(e.file.name," 上传文件失败."))},handleChangeP12:function(e){e.file.status,"done"===e.file.status?(this.form.setFieldsValue({ios_p12:e.file.response.data.item.img}),this.page.ios.iosP12=e.file.response.data.item.img):"error"===e.file.status&&this.$message.error("".concat(e.file.name," 上传文件失败."))}}},V=F,N=Object(f["a"])(V,I,U,!1,null,null,null),L=N.exports,D=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("a-card",{attrs:{bordered:!1}},[t("a-form",{attrs:{form:e.form},on:{submit:e.handleSubmit}},[t("a-form-item",{attrs:{label:"安卓版本下载地址",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["android_url",{rules:[{required:!1,message:""}]}],expression:"['android_url', {rules: [{required: false, message: ''}]}]"}]},[t("span",{attrs:{slot:"addonAfter"},slot:"addonAfter"},[e._v("可以在打包列表选版，或者填写类似应用宝上架后的地址")])])],1),t("a-form-item",{attrs:{label:"苹果版本下载地址",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["ios_url",{rules:[{required:!1,message:""}]}],expression:"['ios_url', {rules: [{required: false, message: ''}]}]"}]},[t("span",{attrs:{slot:"addonAfter"},slot:"addonAfter"},[e._v("上架成功后，将地址填写到这里")])])],1),t("a-form-item",{attrs:{wrapperCol:{span:12}}},[t("a-button",{attrs:{htmlType:"submit",type:"primary"}},[e._v("保存")])],1)],1)],1)},M=[],E={mixins:[R["b"],R["c"]],components:{},computed:Object(i["a"])({},Object(C["mapGetters"])(["token"])),data:function(){return{labelCol:{xs:{span:24},sm:{span:3}},wrapperCol:{xs:{span:24},sm:{span:21}},form:this.$form.createForm(this),page:{uploading:!0}}},created:function(){},mounted:function(){this.init()},methods:{init:function(){this.query()},query:function(){var e=this,a=this.form.setFieldsValue;Object(u["e"])().then((function(t){t.data.app_detail&&e.$nextTick((function(){a(K()(t.data.app_detail,["android_url","ios_url"]))}))}))},handleSubmit:function(e){var a=this;e.preventDefault(),this.form.validateFields((function(e,t){e||Object(u["o"])(t).then((function(e){0===e.code&&a.$message.success("保存成功")}))}))}}},B=E,z=Object(f["a"])(B,D,M,!1,null,null,null),G=z.exports,H={name:"Page",components:{PackPage:b,LogPage:$,DataPage:L,DownloadPage:G},data:function(){return{noTitleKey:"download",tabListNoTitle:[{key:"download",tab:"下载配置"},{key:"log",tab:"安卓包管理"}]}},created:function(){},computed:Object(i["a"])({},Object(C["mapGetters"])(["funApp"])),methods:{handleTabChange:function(e,a){this[a]=e},query:function(){this.$refs.table.refresh(!0)},onSelectChange:function(e,a){this.selectedRowKeys=e,this.selectedRows=a},toggleAdvanced:function(){this.advanced=!this.advanced},resetSearchForm:function(){this.queryParam={date:o()(new Date)}}}},Y=H,J=Object(f["a"])(Y,s,r,!1,null,null,null);a["default"]=J.exports}}]);